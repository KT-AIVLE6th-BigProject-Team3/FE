<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="QnA" />
    <meta name="author" content="황은비" />
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />

    <title>MonoGuard</title>

    <!-- 외부 CSS 및 아이콘 폰트 -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
    <link rel="stylesheet" href="../css/prj.css" />
    <link rel="icon" href="../img/fabicon.svg" />

    <!-- 탭 스타일 정의 -->
    <style>
      .tab-content {
        display: none; /* 기본적으로 탭 콘텐츠는 숨김 */
      }
      .tab-content.active {
        display: block; /* 활성화된 탭 콘텐츠만 표시 */
      }
      .tab-buttons {
        margin-bottom: 20px; /* 탭 버튼과 콘텐츠 간격 설정 */
      }
      .tab-btn {
        padding: 10px 20px;
        margin-right: 10px;
        border: none;
        background-color: #f8f9fc; /* 기본 배경색 */
        border-radius: 4px;
        cursor: pointer;
        font-weight: bold;
      }
      .tab-btn.active {
        background-color: #4e73df; /* 활성화된 탭 배경색 */
        color: white;
      }
    </style>
  </head>

  <body id="page-top">
    <div id="wrapper">
      <!-- 메뉴 영역 (사이드바) -->
      <div id="menu"></div>

      <!-- 메인 콘텐츠 영역 -->
      <div id="content-wrapper" class="d-flex flex-column">
        <div id="content">
          <!-- 상단바 영역 -->
          <div id="topbar"></div>

          <!-- 페이지 콘텐츠 -->
          <div class="container-fluid">
            <!-- 페이지 제목 -->
            <div class="d-sm-flex align-items-center justify-content-between mb-3">
              <h1 class="h3 mb-0 text-gray-800">대시보드</h1>
            </div>

            <!-- 탭 버튼 영역 -->
            <div class="tab-buttons">
              <button class="tab-btn active" onclick="showTab('avg')">AVG</button>
              <button class="tab-btn" onclick="showTab('oht')">OHT</button>
            </div>

            <!-- AVG 탭 콘텐츠 -->
            <div id="avg-tab" class="tab-content active">
              <!-- AVG 콘텐츠 -->
              <div class="row">
                <!-- 좌측 콘텐츠 -->
                <div class="col-lg-7 mb-3">
                  <!-- 최근 작업 환경 -->
                  <div class="card shadow mb-3">
                    <div class="card-header py-3">
                      <h6 class="m-0 font-weight-bold text-primary">최근 작업 환경</h6>
                    </div>
                    <div class="agv-env-card-body">
                      <iframe src="http://localhost:8501" width="100%" height="110" frameborder="0"></iframe>
                    </div>
                  </div>
                  <!-- 작업현장 온도 변화 -->
                  <div class="card shadow mb-3">
                    <div class="card-header py-3">
                      <h6 class="m-0 font-weight-bold text-primary">작업현장 온도 변화</h6>
                    </div>
                    <div class="agv-env-card-body">
                      <iframe src="http://localhost:8502" width="100%" height="315" frameborder="0"></iframe>
                    </div>
                  </div>
                  <!-- 작업현장 습도 변화 -->
                  <div class="card shadow mb-3">
                    <div class="card-header py-3">
                      <h6 class="m-0 font-weight-bold text-primary">작업현장 습도 변화</h6>
                    </div>
                    <div class="agv-env-card-body">
                      <iframe src="http://localhost:8503" width="100%" height="315" frameborder="0"></iframe>
                    </div>
                  </div>
                  <!-- 작업현장 조도 변화 -->
                  <div class="card shadow mb-3">
                    <div class="card-header py-3">
                      <h6 class="m-0 font-weight-bold text-primary">작업현장 조도 변화</h6>
                    </div>
                    <div class="agv-env-card-body">
                      <iframe src="http://localhost:8504" width="100%" height="315" frameborder="0"></iframe>
                    </div>
                  </div>
                </div>

                <!-- 우측 콘텐츠 -->
                <div class="col-lg-5 mb-3">
                  <!-- 기기 현황 -->
                  <div class="card shadow mb-3">
                    <div class="card-header py-3">
                      <h6 class="m-0 font-weight-bold text-primary">최근 작업 환경</h6>
                    </div>
                    <div class="agv-env-card-body">
                      <iframe src="" width="100%" height="510" frameborder="0"></iframe>
                    </div>
                  </div>
                  <!-- 작업현장 온도 변화 -->
                  <div class="card shadow mb-3">
                    <div class="card-header py-3">
                      <h6 class="m-0 font-weight-bold text-primary">작업현장 온도 변화</h6>
                    </div>
                    <div class="agv-env-card-body">
                      <iframe src="http://localhost:8502" width="100%" height="315" frameborder="0"></iframe>
                    </div>
                  </div>
                  <!-- 작업현장 습도 변화 -->
                  <div class="card shadow mb-3">
                    <div class="card-header py-3">
                      <h6 class="m-0 font-weight-bold text-primary">작업현장 습도 변화</h6>
                    </div>
                    <div class="agv-env-card-body">
                      <iframe src="http://localhost:8502" width="100%" height="315" frameborder="0"></iframe>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- OHT 탭 콘텐츠 -->
            <div id="oht-tab" class="tab-content">
              <!-- OHT 콘텐츠 -->
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 탭 전환을 위한 JavaScript -->
    <script>
      // 메뉴와 상단바 로드
      fetch("./sidebar.html")
        .then((response) => response.text())
        .then((html) => (document.getElementById("menu").innerHTML = html))
        .catch((error) => console.error("Error loading sidebar:", error));

      fetch("./topbar.html")
        .then((response) => response.text())
        .then((html) => (document.getElementById("topbar").innerHTML = html))
        .catch((error) => console.error("Error loading topbar:", error));

      // 탭 전환 함수
      function showTab(tabName) {
        // 모든 탭 콘텐츠 숨기기
        document.querySelectorAll(".tab-content").forEach((content) => {
          content.classList.remove("active");
        });
        // 모든 탭 버튼 비활성화
        document.querySelectorAll(".tab-btn").forEach((btn) => {
          btn.classList.remove("active");
        });

        // 선택된 탭 콘텐츠와 버튼 활성화
        document.getElementById(tabName + "-tab").classList.add("active");
        document.querySelector(`button[onclick="showTab('${tabName}')"]`).classList.add("active");
      }
    </script>
  </body>
</html>
